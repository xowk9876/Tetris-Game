# 🎮 테트리스 게임 기획서 (Tetris Game Design Document)

> **참고**: 이 문서는 게임 기획서입니다. 현재 구현된 기능과 차이가 있을 수 있습니다.  
> 실제 구현된 기능은 `README.md`를 참고하세요.

## 📋 목차
1. [게임 개요](#게임-개요)
2. [핵심 게임플레이](#핵심-게임플레이)
3. [게임 모드](#게임-모드) ⚠️ 미구현
4. [시스템 설계](#시스템-설계)
5. [UI/UX 디자인](#uiux-디자인)
6. [기술 스택](#기술-스택)
7. [개발 로드맵](#개발-로드맵)

---

## 🎯 게임 개요

### 기본 컨셉
**클래식 테트리스 + 모던 UX/UI + 확장 기능**을 결합한 고품질 웹 테트리스 게임

### 타겟 플레이어
- **주요**: 20-40대 캐주얼 게이머
- **부차적**: 클래식 게임 애호가, 퍼즐 게임 팬
- **플랫폼**: 웹 브라우저 (PC 우선, 모바일 지원)

### 핵심 가치 제안
1. **클래식 테트리스의 순수한 재미** 유지
2. **모던한 비주얼과 부드러운 애니메이션**
3. **다양한 게임 모드로 지속적인 재미**
4. **소셜 기능으로 경쟁과 공유**

---

## 🎮 핵심 게임플레이

### 기본 규칙 (클래식 테트리스)
- **보드 크기**: 10줄 × 20칸 (표준)
- **블록 종류**: 7가지 테트로미노 (I, O, T, L, J, S, Z)
- **블록 낙하**: 위에서 아래로 자동 낙하
- **조작**: 좌우 이동, 회전, 하드 드롭, 소프트 드롭
- **목표**: 가로 줄을 완성하여 제거하고 최대한 오래 생존

### 조작 방법
| 입력 | 기능 | 설명 |
|------|------|------|
| ← → | 좌우 이동 | 블록을 좌우로 이동 |
| ↑ | 회전 | 블록을 시계 방향으로 90도 회전 |
| ↓ | 소프트 드롭 | 블록을 빠르게 낙하 (점수 보너스) |
| Space | 하드 드롭 | 블록을 즉시 바닥에 떨어뜨림 (점수 보너스) |
| P | 일시정지 | 게임 일시정지/재개 |
| Hold (C) | 홀드 | 현재 블록을 보관하고 다음 블록 사용 |

### 점수 시스템
> ⚠️ **현재 구현**: 레벨 시스템 없음, 고정 속도 사용

```
기본 점수 (현재 구현):
- 1줄 제거: 40점
- 2줄 제거: 100점
- 3줄 제거: 300점
- 4줄 제거 (테트리스): 1200점

보너스 (현재 구현):
- 백투백 테트리스: 1.5배 보너스 ✅
- 콤보: 연속 줄 제거 시 (콤보-1) × 50점 ✅
- 소프트/하드 드롭 점수: 없음 ✅

레벨 시스템: ⚠️ 미구현 (향후 개발)
- 10줄 제거 시 레벨 +1
- 레벨 증가 시 낙하 속도 증가
```

---

## 🎲 게임 모드

> ⚠️ **현재 구현 상태**: 클래식 모드만 구현됨

### 1. 클래식 모드 (Classic Mode) ✅ 구현됨
**목표**: 최대한 오래 생존하며 높은 점수 달성

**현재 구현 특징**:
- 무제한 플레이 ✅
- 고정 낙하 속도 ✅ (레벨 시스템 없음)
- 최고 점수 기록 ✅ (Local Storage)

**향후 계획**:
- 레벨 시스템 (1-20+)
- 속도 점진적 증가

---

### 2. 스프린트 모드 (Sprint Mode) ⚠️ 미구현
**목표**: 40줄을 가장 빠르게 제거

**계획된 특징**:
- 시간 제한 없음 (속도가 승부)
- 40줄 완료 시간 기록
- 리더보드 경쟁

---

### 3. 울트라 모드 (Ultra Mode) ⚠️ 미구현
**목표**: 2분 동안 최대 점수 달성

**계획된 특징**:
- 2분 시간 제한
- 점수 집중 플레이

---

### 4. 챌린지 모드 (Challenge Mode) ⚠️ 미구현
**목표**: 특정 조건 달성

**계획된 챌린지 종류**:
- **마라톤**: 150줄 제거하기
- **퍼펙트 클리어**: 보드를 완전히 비우기
- **콤보 마스터**: 10콤보 이상 달성
- **테트리스 마스터**: 연속 10회 테트리스

---

### 5. 멀티플레이 모드 (Multiplayer Mode) ⚠️ 미구현
**목표**: 실시간 대전

**계획된 게임 타입**:
- **배틀**: 상대방에게 공격 블록 전송
- **레이스**: 동시에 같은 보드로 경쟁

---

## 🎨 시스템 설계

### 블록 시스템

#### 테트로미노 종류
```
I (아이): ▮▮▮▮ (4칸, 2가지 회전)
O (오): ▮▮
        ▮▮ (2×2, 1가지 회전)
T (티): ▮▮▮
          ▮ (4가지 회전)
L (엘): ▮
        ▮
        ▮▮ (4가지 회전)
J (제이):   ▮
            ▮
          ▮▮ (4가지 회전)
S (에스): ▮▮
        ▮▮ (2가지 회전)
Z (제트): ▮▮
          ▮▮ (2가지 회전)
```

#### 블록 생성 시스템
- **7-Bag 시스템**: 7가지 블록을 랜덤하게 섞어서 순서대로 제공
  - 공정한 블록 분배
  - 예측 가능성과 랜덤성의 균형
- **홀드 시스템**: 현재 블록을 보관하고 다음 블록 사용 가능
- **다음 블록 미리보기**: 최대 3개까지 미리보기

#### 회전 시스템
- **SRS (Super Rotation System)**: 현대 테트리스 표준 회전 규칙
  - 벽 킥 (Wall Kick): 벽에 닿아도 회전 가능
  - 바닥 킥 (Floor Kick): 바닥에 닿아도 회전 가능
  - 180도 회전 지원

---

### 보드 시스템

#### 보드 구조
```
┌─────────────────────┐
│  [Hold]  [Next]     │
│                     │
│  ┌───────────────┐  │
│  │               │  │
│  │   게임 보드    │  │ 20줄
│  │   (10×20)     │  │
│  │               │  │
│  └───────────────┘  │
│                     │
│  [Score] [Level]    │
└─────────────────────┘
```

#### 보드 상태 관리
- **그리드 배열**: 2D 배열로 블록 위치 저장
- **고스트 블록**: 현재 블록이 떨어질 위치 미리보기
- **줄 제거 애니메이션**: 줄 제거 시 부드러운 애니메이션
- **게임 오버 감지**: 블록이 상단에 쌓이면 게임 오버

---

### 레벨 시스템 ⚠️ 미구현

> **현재 구현**: 고정 낙하 속도 (800ms) 사용

#### 계획된 레벨 진행
```
레벨 1:   낙하 속도 0.8초/칸
레벨 2:   낙하 속도 0.72초/칸
레벨 3:   낙하 속도 0.63초/칸
...
레벨 10:  낙하 속도 0.5초/칸
레벨 15:  낙하 속도 0.3초/칸
레벨 20:  낙하 속도 0.2초/칸
레벨 30+: 낙하 속도 0.1초/칸 (최대 속도)
```

#### 계획된 레벨업 조건
- 10줄 제거 시 레벨 +1
- 레벨업 시 화려한 효과
- 레벨업 보너스 점수

---

### 점수 시스템 상세

#### 현재 구현된 점수 계산
```javascript
// 줄 제거 점수 (레벨 없음)
const lineScores = {
    1: 40,    // 1줄
    2: 100,   // 2줄
    3: 300,   // 3줄
    4: 1200   // 4줄 (테트리스)
};

// 기본 점수
const baseScore = lineScores[linesCleared] || 0;
let score = baseScore;

// 콤보 보너스 (누적)
if (comboCount > 1) {
    score += 50 * (comboCount - 1);
}

// 백투백 테트리스 보너스
if (isBackToBackTetris && linesCleared === 4) {
    score = Math.floor(score * 1.5);
}
```

#### 계획된 점수 계산 (레벨 시스템 포함)
```javascript
// 최종 점수 = 기본 점수 × 레벨 (향후 구현)
const finalScore = lineScores[linesCleared] * currentLevel;
```

#### 통계 추적
- 총 점수
- 총 줄 제거 수
- 테트리스 횟수
- 최대 콤보
- 플레이 시간
- 평균 줄 제거 속도

---

## 🎨 UI/UX 디자인

### 디자인 컨셉
**"네온 사이버펑크 + 글래스모피즘"**

#### 색상 팔레트
```
배경: 다크 그라데이션 (#0f0f23 → #1a1a2e)
블록 색상:
- I: #00f5ff (네온 시안)
- O: #ffd700 (골드)
- T: #ff6b9d (핑크)
- L: #ff8c00 (오렌지)
- J: #4169e1 (로얄 블루)
- S: #32cd32 (라임 그린)
- Z: #ff1493 (딥 핑크)

UI 강조색:
- 주요: #00f5ff (네온 블루)
- 성공: #00ff41 (네온 그린)
- 경고: #ff0040 (네온 레드)
- 보조: #bf00ff (네온 퍼플)
```

#### 레이아웃
```
┌─────────────────────────────────────┐
│  [로고]  [점수] [레벨] [줄수] [일시정지] │
├─────────────────────────────────────┤
│                                     │
│  [Hold]      [게임 보드]    [Next]  │
│  ┌────┐      ┌──────────┐  ┌────┐  │
│  │    │      │          │  │    │  │
│  │    │      │  10×20   │  │    │  │
│  │    │      │          │  │    │  │
│  └────┘      └──────────┘  └────┘  │
│                                     │
│  [통계] [설정] [리더보드] [도움말]    │
└─────────────────────────────────────┘
```

#### 애니메이션 효과
1. **블록 낙하**: 부드러운 가속 애니메이션
2. **줄 제거**: 폭발 파티클 효과
3. **회전**: 부드러운 회전 트랜지션
4. **레벨업**: 화면 전체 글로우 효과
5. **게임 오버**: 카메라 흔들림 + 빨간 플래시

---

## 🛠 기술 스택

### 프론트엔드
- **게임 엔진**: Phaser 3.70.0 (현재 프로젝트와 동일)
- **렌더링**: WebGL (GPU 가속)
- **언어**: JavaScript (ES6+)
- **스타일**: CSS3 (글래스모피즘, 그라데이션)

### 아키텍처 (현재 구현)
```
game.js
├── BlockBag (7-Bag 블록 생성 시스템) ✅
├── Board (보드 관리) ✅
├── Tetromino (블록 관리) ✅
├── GameState (게임 상태 관리) ✅
│   ├── 점수 시스템 ✅
│   ├── 콤보 시스템 ✅
│   └── 백투백 보너스 ✅
├── TetrisRenderer (렌더링) ✅
└── TetrisScene (Phaser Scene) ✅
    ├── 입력 처리 ✅
    ├── 사운드 시스템 ✅
    └── UI 렌더링 ✅

⚠️ 미구현:
- LevelSystem (레벨 시스템)
- GameModes (다양한 게임 모드)
- Menu/Settings UI
```

### 데이터 저장
- **로컬 스토리지**: 최고 점수, 설정, 진행 상황
- **향후**: 서버 연동 (리더보드, 멀티플레이)

---

## 📅 개발 로드맵

### Phase 1: 핵심 기능 (2-3주) ✅ 완료
**목표**: 기본 테트리스 게임 완성

- [x] 보드 시스템 구현
- [x] 7가지 테트로미노 구현
- [x] 블록 낙하 시스템
- [x] 기본 조작 (이동, 회전, 드롭)
- [x] 줄 제거 시스템
- [x] 기본 점수 시스템
- [x] 게임 오버 처리
- [x] 기본 UI

**우선순위**: ⭐⭐⭐ (최우선)

---

### Phase 2: 게임플레이 개선 (1-2주) ✅ 부분 완료
**목표**: 부드러운 게임플레이와 밸런싱

- [x] 홀드 시스템
- [x] 다음 블록 미리보기
- [x] 고스트 블록
- [x] SRS 회전 시스템
- [ ] 레벨 시스템 ⚠️ 미구현
- [x] 점수 시스템 개선
- [x] 콤보 시스템
- [x] 백투백 보너스

**우선순위**: ⭐⭐⭐ (최우선)

---

### Phase 3: 비주얼 개선 (1-2주) ✅ 부분 완료
**목표**: 화려한 비주얼과 애니메이션

- [x] 파티클 효과
- [x] 줄 제거 애니메이션
- [ ] 레벨업 효과 (레벨 시스템 필요)
- [x] 블록 배치 효과
- [x] 배경 효과
- [x] 사운드 효과 (선택)
- [ ] 카메라 효과

**우선순위**: ⭐⭐ (중요)

---

### Phase 4: 게임 모드 (2-3주)
**목표**: 다양한 게임 모드 추가

- [ ] 클래식 모드 완성
- [ ] 스프린트 모드
- [ ] 울트라 모드
- [ ] 챌린지 모드 (기본)
- [ ] 모드 선택 UI
- [ ] 모드별 리더보드

**우선순위**: ⭐⭐ (중요)

---

### Phase 5: UI/UX 개선 (1주)
**목표**: 사용자 경험 최적화

- [ ] 메인 메뉴
- [ ] 설정 화면 (난이도, 키 바인딩)
- [ ] 통계 화면
- [ ] 도움말/튜토리얼
- [ ] 반응형 디자인
- [ ] 모바일 최적화

**우선순위**: ⭐⭐ (중요)

---

### Phase 6: 고급 기능 (2-3주)
**목표**: 차별화된 기능 추가

- [ ] 업적 시스템
- [ ] 배지 시스템
- [ ] 테마/스킨 커스터마이징
- [ ] 리플레이 시스템
- [ ] 통계 분석
- [ ] 챌린지 확장

**우선순위**: ⭐ (선택)

---

### Phase 7: 멀티플레이 (향후)
**목표**: 온라인 대전 기능

- [ ] 서버 인프라 구축
- [ ] 실시간 멀티플레이
- [ ] 배틀 모드
- [ ] 글로벌 리더보드
- [ ] 친구 시스템

**우선순위**: ⭐ (향후)

---

## 🎯 핵심 성공 요소

### 1. 정확한 게임플레이
- **정밀한 블록 조작**: 1프레임 단위 정확도
- **공정한 랜덤**: 7-Bag 시스템
- **표준 규칙**: SRS 회전 시스템

### 2. 부드러운 성능
- **60 FPS 유지**: 최적화된 렌더링
- **낮은 입력 지연**: 즉각적인 반응
- **부드러운 애니메이션**: Tween 기반

### 3. 직관적인 UI
- **명확한 정보 표시**: 점수, 레벨, 다음 블록
- **쉬운 조작**: 키보드 + 마우스 지원
- [ ] **시각적 피드백**: 모든 액션에 피드백

### 4. 지속적인 재미
- **다양한 모드**: 클래식부터 챌린지까지
- **진행 시스템**: 레벨, 업적, 기록
- **경쟁 요소**: 리더보드, 기록 갱신

---

## 📊 예상 개발 시간

| Phase | 작업 | 예상 시간 |
|-------|------|----------|
| Phase 1 | 핵심 기능 | 2-3주 |
| Phase 2 | 게임플레이 개선 | 1-2주 |
| Phase 3 | 비주얼 개선 | 1-2주 |
| Phase 4 | 게임 모드 | 2-3주 |
| Phase 5 | UI/UX 개선 | 1주 |
| Phase 6 | 고급 기능 | 2-3주 |
| **총계** | **MVP 완성** | **7-11주** |
| **총계** | **완전한 버전** | **9-14주** |

---

## 🎮 게임플레이 밸런싱

### 난이도 곡선 ⚠️ 미구현
> **현재**: 고정 속도 (800ms)

```
계획된 난이도 곡선:
레벨 1-5:   학습 단계 (느린 속도, 쉬운 패턴)
레벨 6-10:  성장 단계 (보통 속도, 다양한 패턴)
레벨 11-15: 도전 단계 (빠른 속도, 복잡한 패턴)
레벨 16+:   마스터 단계 (매우 빠른 속도, 최고 난이도)
```

### 점수 밸런싱 (현재 구현)
- **테트리스 우대**: 4줄 제거 시 최고 점수 (1200점) ✅
- **콤보 보너스**: 연속 줄 제거 시 추가 점수 ✅
- **레벨 스케일링**: ⚠️ 미구현 (향후 개발)

---

## 🔧 기술적 고려사항

### 성능 최적화
- **객체 풀링**: 블록, 파티클 재사용
- **렌더링 최적화**: 필요한 부분만 다시 그리기
- **메모리 관리**: 사용하지 않는 객체 정리

### 호환성
- **브라우저 지원**: Chrome, Firefox, Safari, Edge
- **WebGL 폴백**: Canvas 2D로 폴백
- **반응형**: 다양한 화면 크기 지원

### 접근성
- **키 바인딩 커스터마이징**: 사용자 정의 조작
- **색상 모드**: 색맹 사용자 고려
- **난이도 조절**: 초보자부터 전문가까지

---

## 📝 다음 단계

### 현재 구현 상태
✅ **Phase 1-2 완료**: 기본 테트리스 게임 완성
- 보드 시스템, 블록 생성, 조작, 점수 시스템 모두 구현됨
- 홀드, 콤보, 백투백 보너스 구현됨

### 향후 개발 우선순위
1. **레벨 시스템 구현**: 속도 점진적 증가
2. **게임 모드 추가**: 스프린트, 울트라 모드
3. **UI 개선**: 메뉴, 설정 화면
4. **모바일 지원**: 터치 이벤트 처리

---

## 🎉 결론

이 기획서는 **클래식 테트리스의 핵심 재미를 유지**하면서 **모던한 UX/UI와 다양한 게임 모드**를 추가한 고품질 테트리스 게임을 목표로 합니다.

### 현재 구현 상태
✅ **MVP 완성**: 기본 테트리스 게임 완전히 작동
- 핵심 게임플레이: ✅ 완료
- 게임플레이 개선: ✅ 대부분 완료 (레벨 시스템 제외)
- 비주얼 개선: ✅ 대부분 완료

### 향후 개발
⚠️ **미구현 기능**: 레벨 시스템, 다양한 게임 모드, 메뉴/설정 UI

**핵심 원칙**:
- ✅ 정확한 게임플레이 우선
- ✅ 부드러운 성능 보장
- ✅ 직관적인 사용자 경험
- ✅ 지속적인 재미 제공

**현재 상태**: Phase 1-2 완료, Phase 3 부분 완료. 레벨 시스템과 게임 모드 확장이 다음 우선순위입니다.

---

*작성일: 2025년*
*버전: 1.0*

